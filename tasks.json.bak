{
    "meta": {
        "version": "2.1",
        "theme": "isekai_adventures",
        "description": "База квестов для LMS Anime Code Adventures (balanced XP)"
    },
    "categories": [
        "python",
        "javascript",
        "frontend",
        "scratch"
    ],
    "tasks": [
        {
            "id": "py_01_var",
            "category": "python",
            "tier": "D",
            "xp": 10,
            "title": "Убийца Слизи: Меч",
            "story": "Появляется дикая Слизь! У нее 10 HP. Тебе нужно оружие. Создай переменную, чтобы хранить силу твоего меча.",
            "description": "Создай переменную с именем `sword_damage` и установи ей значение `15`.",
            "initial_code": "# Создай свое оружие\n",
            "check_logic": {
                "engine": "pyodide",
                "cases": [
                    {
                        "type": "variable_value",
                        "name": "sword_damage",
                        "expected": 15
                    }
                ]
            }
        },
        {
            "id": "py_02_str",
            "category": "python",
            "tier": "D",
            "xp": 10,
            "title": "Регистрация в Гильдии",
            "story": "Регистратор Гильдии спрашивает твое имя. Она плохо тебя слышит. Прокричи свое имя!",
            "description": "Напиши функцию `shout_name(name)`, которая возвращает имя в ВЕРХНЕМ РЕГИСТРЕ.",
            "initial_code": "def shout_name(name):\n    # Преобразуй в верхний регистр\n    return name\n",
            "check_logic": {
                "engine": "pyodide",
                "cases": [
                    {
                        "code": "shout_name('naruto')",
                        "expected": "NARUTO"
                    },
                    {
                        "code": "shout_name('sasuke')",
                        "expected": "SASUKE"
                    }
                ]
            }
        },
        {
            "id": "py_03_list",
            "category": "python",
            "tier": "C",
            "xp": 30,
            "title": "Проверка Инвентаря",
            "story": "В твоей сумке лежат предметы: ['sword', 'potion', 'trash', 'gold']. Мусор тянет тебя вниз!",
            "description": "Напиши функцию `clean_bag(items)`, которая удаляет 'trash' из списка и возвращает обновленный список.",
            "initial_code": "def clean_bag(items):\n    # Удали 'trash' из списка\n    return items\n",
            "check_logic": {
                "engine": "pyodide",
                "cases": [
                    {
                        "code": "clean_bag(['sword', 'trash', 'potion'])",
                        "expected": [
                            "sword",
                            "potion"
                        ]
                    },
                    {
                        "code": "clean_bag(['trash'])",
                        "expected": []
                    }
                ]
            }
        },
        {
            "id": "py_04_loop",
            "category": "python",
            "tier": "C",
            "xp": 35,
            "title": "Счетчик Монстров",
            "story": "Гильдии нужно знать, сколько монстров в подземелье. Посчитай всех врагов с HP > 0.",
            "description": "Напиши функцию `count_alive(monsters)`, которая считает, сколько монстров имеют HP > 0. Каждый монстр - это словарь с ключом 'hp'.",
            "initial_code": "def count_alive(monsters):\n    # monsters - это список словарей, например [{'hp': 10}, {'hp': 0}]\n    count = 0\n    return count\n",
            "check_logic": {
                "engine": "pyodide",
                "cases": [
                    {
                        "code": "count_alive([{'hp': 10}, {'hp': 0}, {'hp': 5}])",
                        "expected": 2
                    },
                    {
                        "code": "count_alive([{'hp': 0}])",
                        "expected": 0
                    }
                ]
            }
        },
        {
            "id": "py_05_dict",
            "category": "python",
            "tier": "B",
            "xp": 50,
            "title": "Характеристики Героя",
            "story": "Создай героя с именем, уровнем и HP. Базе данных гильдии нужен этот формат.",
            "description": "Напиши функцию `create_hero(name, level)`, которая возвращает словарь с 'name', 'level' и 'hp' (hp = level * 10).",
            "initial_code": "def create_hero(name, level):\n    # Верни словарь\n    return {}\n",
            "check_logic": {
                "engine": "pyodide",
                "cases": [
                    {
                        "code": "create_hero('Kirito', 5)",
                        "expected": {
                            "name": "Kirito",
                            "level": 5,
                            "hp": 50
                        }
                    },
                    {
                        "code": "create_hero('Asuna', 10)",
                        "expected": {
                            "name": "Asuna",
                            "level": 10,
                            "hp": 100
                        }
                    }
                ]
            }
        },
        {
            "id": "js_01_sum",
            "category": "javascript",
            "tier": "D",
            "xp": 10,
            "title": "Калькулятор Торговца",
            "story": "Деревенский торговец забыл математику. Помоги ему сложить цены!",
            "description": "Напиши функцию `sumPrices(a, b)`, которая возвращает сумму двух чисел.",
            "initial_code": "function sumPrices(a, b) {\n    // Верни сумму\n    return 0;\n}",
            "check_logic": {
                "engine": "javascript",
                "cases": [
                    {
                        "code": "sumPrices(10, 20)",
                        "expected": 30
                    },
                    {
                        "code": "sumPrices(5, 5)",
                        "expected": 10
                    },
                    {
                        "code": "sumPrices(-5, 15)",
                        "expected": 10
                    }
                ]
            }
        },
        {
            "id": "js_02_arr",
            "category": "javascript",
            "tier": "C",
            "xp": 30,
            "title": "Фильтр Зелий",
            "story": "В твоем инвентаре пустые бутылки смешались с зельями. Отфильтруй пустые!",
            "description": "Напиши функцию `filterPotions(arr)`, которая удаляет все строки 'Empty' из массива.",
            "initial_code": "function filterPotions(arr) {\n    // Удали элементы 'Empty'\n    return arr;\n}",
            "check_logic": {
                "engine": "javascript",
                "cases": [
                    {
                        "code": "filterPotions(['HP', 'Empty', 'Mana'])",
                        "expected": [
                            "HP",
                            "Mana"
                        ]
                    },
                    {
                        "code": "filterPotions(['Empty', 'Empty'])",
                        "expected": []
                    }
                ]
            }
        },
        {
            "id": "js_03_obj",
            "category": "javascript",
            "tier": "C",
            "xp": 35,
            "title": "Улучшение Оружия",
            "story": "Кузнец может улучшить твое оружие. Увеличь его урон на множитель!",
            "description": "Напиши `upgradeWeapon(weapon, multiplier)`. Оружие - это {name, damage}. Верни новый объект с damage * multiplier.",
            "initial_code": "function upgradeWeapon(weapon, multiplier) {\n    // Верни улучшенное оружие\n    return weapon;\n}",
            "check_logic": {
                "engine": "javascript",
                "cases": [
                    {
                        "code": "upgradeWeapon({name: 'Sword', damage: 10}, 2)",
                        "expected": {
                            "name": "Sword",
                            "damage": 20
                        }
                    },
                    {
                        "code": "upgradeWeapon({name: 'Dagger', damage: 5}, 3)",
                        "expected": {
                            "name": "Dagger",
                            "damage": 15
                        }
                    }
                ]
            }
        },
        {
            "id": "js_04_find",
            "category": "javascript",
            "tier": "B",
            "xp": 50,
            "title": "Охотник на Боссов",
            "story": "Найди босса в массиве монстров! У боссов isBoss: true.",
            "description": "Напиши `findBoss(monsters)`, которая возвращает первого монстра с isBoss === true, или null, если такого нет.",
            "initial_code": "function findBoss(monsters) {\n    // Найди босса\n    return null;\n}",
            "check_logic": {
                "engine": "javascript",
                "cases": [
                    {
                        "code": "findBoss([{name: 'Slime'}, {name: 'Dragon', isBoss: true}])",
                        "expected": {
                            "name": "Dragon",
                            "isBoss": true
                        }
                    },
                    {
                        "code": "findBoss([{name: 'Goblin'}])",
                        "expected": null
                    }
                ]
            }
        },
        {
            "id": "fe_01_box",
            "category": "frontend",
            "tier": "D",
            "xp": 10,
            "title": "Магический Кристалл",
            "story": "Создай светящийся магический кристалл для посоха волшебника.",
            "description": "Создай div с классом 'crystal'. Сделай его 100x100px, фиолетовым (#9b59b6) и круглым (border-radius: 50%).",
            "initial_code": "<style>\n  .crystal {\n    /* Твои стили */\n  }\n</style>\n<div class=\"crystal\"></div>",
            "check_logic": {
                "engine": "iframe",
                "content_contain": "border-radius",
                "selector": ".crystal"
            }
        },
        {
            "id": "fe_02_btn",
            "category": "frontend",
            "tier": "C",
            "xp": 30,
            "title": "Кнопка Огненного Шара",
            "story": "Создай кнопку, которая выглядит огненной! Она должна светиться при наведении.",
            "description": "Создай кнопку с текстом 'Cast Fireball'. Добавь эффект :hover, который меняет фон на оранжевый.",
            "initial_code": "<style>\n  button {\n    background: #e74c3c;\n    color: white;\n    padding: 15px 30px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n  }\n  /* Добавь эффект при наведении */\n</style>\n<button>Cast Fireball</button>",
            "check_logic": {
                "engine": "iframe",
                "content_contain": ":hover",
                "selector": "button"
            }
        },
        {
            "id": "fe_03_card",
            "category": "frontend",
            "tier": "B",
            "xp": 50,
            "title": "Карточка Героя",
            "story": "Создай карточку персонажа, показывающую имя героя и характеристики.",
            "description": "Создай карточку с классом 'hero-card'. В ней должен быть заголовок (h2) и параграф (p). Используй flexbox для разметки.",
            "initial_code": "<style>\n  .hero-card {\n    /* Дизайн твоей карточки */\n  }\n</style>\n<div class=\"hero-card\">\n  <h2>Hero Name</h2>\n  <p>Level 10 Warrior</p>\n</div>",
            "check_logic": {
                "engine": "iframe",
                "content_contain": "flex",
                "selector": ".hero-card"
            }
        },
        {
            "id": "scr_01_move",
            "category": "scratch",
            "tier": "D",
            "xp": 10,
            "title": "Первые Шаги",
            "story": "Научи кота ходить! Заставь его двигаться при нажатии клавиш стрелок.",
            "description": "Создай проект Scratch, где спрайт двигается влево/вправо с помощью стрелок. Отправь ссылку на проект.",
            "initial_code": "Вставь ссылку на твой Scratch проект здесь:\nhttps://scratch.mit.edu/projects/YOUR_PROJECT_ID",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin"
            }
        },
        {
            "id": "scr_02_jump",
            "category": "scratch",
            "tier": "C",
            "xp": 30,
            "title": "Мастер Прыжков",
            "story": "Добавь прыжки своему персонажу! Нажми пробел, чтобы прыгнуть.",
            "description": "Создай проект Scratch, где нажатие Пробела заставляет спрайта прыгнуть (вверх и обратно вниз). Отправь ссылку.",
            "initial_code": "Вставь ссылку на твой Scratch проект здесь:\nhttps://scratch.mit.edu/projects/YOUR_PROJECT_ID",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin"
            }
        },
        {
            "id": "scr_03_chase",
            "category": "scratch",
            "tier": "B",
            "xp": 50,
            "title": "Погоня Врага",
            "story": "Создай врага, который преследует игрока! Используй блоки 'повернуть к' и 'идти'.",
            "description": "Сделай второго спрайта, который всегда движется к спрайту игрока. Отправь ссылку на проект.",
            "initial_code": "Вставь ссылку на твой Scratch проект здесь:\nhttps://scratch.mit.edu/projects/YOUR_PROJECT_ID",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin"
            }
        },
        {
            "id": "scr_04_glide",
            "category": "scratch",
            "tier": "D",
            "xp": 10,
            "title": "Призрачный Полёт",
            "story": "Твой дух должен бесшумно перемещаться по замку. Используй магию скольжения!",
            "description": "Используй блок `плыть ... сек в случайное положение`, чтобы спрайт плавно перемещался.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "motion_glideto"
                ]
            }
        },
        {
            "id": "scr_05_costume",
            "category": "scratch",
            "tier": "D",
            "xp": 10,
            "title": "Маскировка Шпиона",
            "story": "Стража близко! Быстро смени внешность, чтобы тебя не узнали.",
            "description": "Сделай так, чтобы при клике на спрайт он менял костюм (`следующий костюм`).",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "looks_nextcostume"
                ]
            }
        },
        {
            "id": "scr_06_sound",
            "category": "scratch",
            "tier": "D",
            "xp": 10,
            "title": "Боевой Клич",
            "story": "Враг наступает. Издай устрашающий звук, чтобы поднять боевой дух!",
            "description": "При нажатии `Пробел` спрайт должен воспроизводить звук (`играть звук ... до конца`).",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "sound_playuntildone"
                ]
            }
        },
        {
            "id": "scr_07_say",
            "category": "scratch",
            "tier": "D",
            "xp": 10,
            "title": "Мудрый Совет",
            "story": "Старейшина хочет передать тебе древнее знание. Выслушай его.",
            "description": "Пусть спрайт скажет 'Опасно идти одному, возьми это!' в течение 2 секунд.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "looks_sayforsecs"
                ]
            }
        },
        {
            "id": "scr_08_size",
            "category": "scratch",
            "tier": "D",
            "xp": 15,
            "title": "Зелье Роста",
            "story": "Ты выпил странное зелье и начал расти! Стань великаном.",
            "description": "При нажатии на флажок установи размер 100%, а затем плавно увеличивай его до 200%.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "looks_setsizeto",
                    "looks_changesizeby"
                ]
            }
        },
        {
            "id": "scr_09_dialog",
            "category": "scratch",
            "tier": "C",
            "xp": 35,
            "title": "Разговор с Торговцем",
            "story": "Торговец предлагает редкий товар. Поторгуйся с ним.",
            "description": "Создай диалог между двумя спрайтами. Используй блоки `ждать` и `говорить`, чтобы они отвечали друг другу.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "control_wait",
                    "looks_sayforsecs"
                ]
            }
        },
        {
            "id": "scr_10_backdrop",
            "category": "scratch",
            "tier": "C",
            "xp": 35,
            "title": "Смена Локации",
            "story": "Ты покидаешь безопасный город и входишь в темный лес.",
            "description": "Когда спрайт касается края экрана, фон должен смениться на `Forest`, а спрайт переместиться в начало.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "looks_switchbackdropto",
                    "motion_gotoxy"
                ]
            }
        },
        {
            "id": "scr_11_input",
            "category": "scratch",
            "tier": "C",
            "xp": 40,
            "title": "Пароль от Ворот",
            "story": "Страж ворот требует пароль. Только истинный герой знает ответ.",
            "description": "Спрайт должен спросить 'Пароль?'. Если ответ 'Mellon', сказать 'Проходи', иначе 'Уходи'.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "sensing_askandwait",
                    "control_if_else"
                ]
            }
        },
        {
            "id": "scr_12_broadcast",
            "category": "scratch",
            "tier": "C",
            "xp": 40,
            "title": "Сигнал Атаки",
            "story": "Командир дает сигнал! Все лучники должны выстрелить одновременно.",
            "description": "Один спрайт передает сообщение `Атака`, другие спрайты при получении сообщения начинают анимацию.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "event_broadcast",
                    "event_whenbroadcastreceived"
                ]
            }
        },
        {
            "id": "scr_13_variable",
            "category": "scratch",
            "tier": "C",
            "xp": 40,
            "title": "Сбор Кристаллов",
            "story": "Собирай магические кристаллы, чтобы зарядить посох.",
            "description": "Создай переменную `Score`. При клике на спрайт кристалла, увеличивай счет на 1 и прячь кристалл.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "data_changevariableby",
                    "data_showvariable"
                ]
            }
        },
        {
            "id": "scr_14_loop",
            "category": "scratch",
            "tier": "B",
            "xp": 50,
            "title": "Патруль Стражника",
            "story": "Орк патрулирует периметр. Не попадись ему на глаза!",
            "description": "Заставь спрайта бесконечно ходить влево-вправо. Используй цикл `всегда` и `если касается края, оттолкнуться`.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "control_forever",
                    "motion_ifonedgebounce"
                ]
            }
        },
        {
            "id": "scr_15_if_else",
            "category": "scratch",
            "tier": "B",
            "xp": 55,
            "title": "Проверка Уровня",
            "story": "Только опытные воины могут войти в подземелье.",
            "description": "Если переменная `Level` > 5, спрайт говорит 'Добро пожаловать', иначе - 'Тренируйся еще'.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "control_if_else",
                    "operator_gt"
                ]
            }
        },
        {
            "id": "scr_16_collision",
            "category": "scratch",
            "tier": "B",
            "xp": 55,
            "title": "Огненная Ловушка",
            "story": "Пол - это лава! Не касайся красных камней.",
            "description": "Если спрайт героя касается красного цвета (лавы), игра останавливается или отнимаются жизни.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "sensing_touchingcolor"
                ]
            }
        },
        {
            "id": "scr_17_clone",
            "category": "scratch",
            "tier": "B",
            "xp": 60,
            "title": "Армия Скелетов",
            "story": "Некромант призывает миньонов! Их становится все больше.",
            "description": "Каждую секунду создавай клон скелета, который идет в случайном направлении.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "control_create_clone_of",
                    "control_start_as_clone"
                ]
            }
        },
        {
            "id": "scr_18_timer",
            "category": "scratch",
            "tier": "B",
            "xp": 60,
            "title": "Выжить 10 Секунд",
            "story": "Продержись на арене, пока не откроются ворота!",
            "description": "Используй таймер. Уворачивайся от врагов. Если таймер > 10, выиграл.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "sensing_timer",
                    "control_if"
                ]
            }
        },
        {
            "id": "scr_19_game_catcher",
            "category": "scratch",
            "tier": "A",
            "xp": 80,
            "title": "Ловец Душ",
            "story": "Поймай падающие души, прежде чем они исчезнут в бездне.",
            "description": "Создай игру: сверху падают предметы, игрок внизу ловит их корзиной. Считай очки.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "motion_changexby",
                    "operator_random"
                ]
            }
        },
        {
            "id": "scr_20_game_platform",
            "category": "scratch",
            "tier": "A",
            "xp": 80,
            "title": "Путь Героя",
            "story": "Преодолей пропасти и препятствия, чтобы добраться до замка.",
            "description": "Реализуй простую физику прыжков и гравитации. Спрайт должен прыгать по платформам.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "motion_changeyby",
                    "sensing_touchingobject"
                ]
            }
        },
        {
            "id": "scr_21_game_shooter",
            "category": "scratch",
            "tier": "A",
            "xp": 80,
            "title": "Оборона Башни",
            "story": "Враги атакуют ворота! Не дай им пройти.",
            "description": "Спрайт игрока стреляет снарядами во врагов, которые идут волнами.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "control_create_clone_of",
                    "motion_movesteps"
                ]
            }
        },
        {
            "id": "scr_22_list",
            "category": "scratch",
            "tier": "A",
            "xp": 70,
            "title": "Книга Заклинаний",
            "story": "Запиши новые заклинания в свой гримуар.",
            "description": "Используй Список. Кнопки 'Добавить' и 'Удалить' должны менять содержимое списка заклинаний.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "data_addtolist",
                    "data_deleteoflist"
                ]
            }
        },
        {
            "id": "scr_23_custom_block",
            "category": "scratch",
            "tier": "A",
            "xp": 75,
            "title": "Тайный Прием",
            "story": "Создай свою уникальную технику боя.",
            "description": "Создай Свой Блок (Custom Block) 'SuperJump', который делает прыжок с сальто, и используй его.",
            "initial_code": "ссылка_на_проект",
            "check_logic": {
                "engine": "manual",
                "evaluator": "admin",
                "required_blocks": [
                    "procedures_definition"
                ]
            }
        }
    ]
}